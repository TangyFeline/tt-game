@model IEnumerable<TT.Domain.Models.NewsPost>
@using TT.Domain.Models

<nav class="navbar navbar-default outsideContainer navbarTT2">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
            <ul class="nav navbar-nav" style="width:100%;">
                <li>@Html.ActionLink("Back", "Index", "PvPAdmin")</li>
                <li>@Html.ActionLink("Add news", "EditNewsPost", "PvPAdmin", new { Id = -1 }, null)</li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div>
    <p class="infoMessage result">@Html.Raw(ViewBag.Result)</p>
    <p class="infoMessage error">@ViewBag.ErrorMessage</p>
    <p class="infoMessage suberror">@ViewBag.SubErrorMessage</p>
</div>

<div class="containerInner">



    <h2>ListNewsPosts</h2>

    <table id="newsPosts" class="table table-hover messageTable">
        <thead>
            <tr>
                <th>Id</th>
                <th>Timestamp</th>
                <th>Text</th>
                <th>Visibility</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>

            @{
                foreach (NewsPost n in Model)
                {
                    <tr>
                        <td>@n.Id</td>
                        <td>@n.Timestamp</td>
                        <td>@Html.Raw(n.Text)</td>
                        <td>@n.PrintVisiblity()</td>
                        <td>@Html.ActionLink("Edit", "EditNewsPost", "PvPAdmin", new { Id = n.Id }, null)</td>
                        <td>@Html.ActionLink("[X]", "DeleteNewsPost", "PvPAdmin", new { Id = n.Id }, new { onclick = "return confirm('Are you sure you want to delete this?')", @class = "" })</td>
                    </tr>
                }
            }

        </tbody>

    </table>

</div>
<script>
        $(document).ready(function () {
            $('#newsPosts').dataTable({
                "order": [[1, "desc"]],
                "columnDefs": [{
                    "targets": 1,
                    "render": function (data, type, full, meta) {
                        if (type == "display") return moment(data).fromNow();
                        return data;
                    }
                }]
            });
        });
</script>

<style>
    .containerInner img {
        width: 100%;
    }
</style>
