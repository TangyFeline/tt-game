@model tfgame.ViewModels.PlayerFormViewModel
@using tfgame.CustomHtmlHelpers
@using tfgame.Procedures

@{
    int HealthWidth = Convert.ToInt32(Model.Player.Health / Model.Player.MaxHealth * 100);
    if (HealthWidth > 100) { HealthWidth = 100; }
    int ManaWidth = Convert.ToInt32(Model.Player.Mana / Model.Player.MaxMana * 100);
    if (ManaWidth > 100) { ManaWidth = 100; }
    string gendercolor;
    if (Model.Player.Gender == "male")
    {
        gendercolor = "blue";
    }
    else if (Model.Player.Gender == "female")
    {
        gendercolor = "purple";
    }
    else
    {
        gendercolor = "black";
    }

}

<div class="@CharactersHere.StyleIfBot(Model.Player.ToDbPlayer())" playnum="@Model.Player.Id">
    
    <div class="portrait" style="background-image: url(/Images/PvP/portraits/Thumbnails/100/@Model.Form.PortraitUrl);">
        
        <span class="icon-@Model.Player.Gender" style="float:right;"></span>
        <span class="icon-level"><b>@Model.Player.Level</b></span>
        <span class="portraitIconRP">@CharactersHere.PrintRPIcon(Model.Player.ToDbPlayer()) @CharactersHere.PrintPvPIcon(Model.Player.ToDbPlayer()) @CharactersHere.PrintMCIcon(Model.Player.ToDbPlayer()) @CharactersHere.PrintDonatorIcon(Model.Player.ToDbPlayer())</span>
        @{
            if (PlayerProcedures.PlayerIsOffline(Model.Player) == true)
            {
                <span class="icon-sleep" title="This player is offline and cannot be attacked."></span>
            }
        }
    </div>

    <div class="charInfoWrapper">
        <span class="name">
            <span style="color: @gendercolor">
                @Html.ActionLink(Model.Player.GetFullName(), "LookAtPlayer", "PvP", new { id = Model.Player.Id }, null)
                <br />
                <span class="playerDescription">@Model.Form.FriendlyName</span>
            </span>
        </span><br />
        <span class="covBox">@CharactersHere.GetCovenantInfo(Model.Player.ToDbPlayer())</span>
        <div class="healthWrapper" title="@Model.Player.Health / @Model.Player.MaxHealth willpower">
            <div class="healthBar" style="width: @HealthWidth%"></div>
        </div>
        <div class="manaWrapper" title="@Model.Player.Mana / @Model.Player.MaxMana mana">
            <div class="manaBar" style="width: @ManaWidth%"></div>
        </div>
    </div>
</div>

