<head>
    <script src="~/Scripts/jquery-ui-1.10.4.js"></script>
</head>

<h1>Updated Oct 5, 2015</h1>


<div style="overflow-x: scroll;">
    <table id="itemTable">


        <thead>
            <tr>
                <th>Graphic</th>
                <th>Name</th>
                <th>Item Type</th>
                <th>Discipline</th>
                <th>Perception</th>
                <th>Charisma</th>
                <th>Fortitude</th>
                <th>Agility</th>
                <th>Restoration</th>
                <th>Magicka</th>
                <th>Regeneration</th>
                <th>Luck</th>
            </tr>
        </thead>
        <tbody></tbody>




    </table>
</div>

<script>

    var items = "";

    // populate the the jump to dropdown with all states found for the current quest
    function loadJson() {

        $.getJSON("/Content/JSON/items.json", function (data) {
            items = data;
        }).then(function () {
            renderTable();
        }).fail(function () {
            alert("Failed to load json");
        });
    }

    //public float Discipline { get; set; }
    //public float Perception { get; set; }
    //public float Charisma { get; set; }
    //public float Fortitude { get; set; }
    //public float Agility { get; set; }
    //public float Allure { get; set; } -- Restoration
    //public float Magicka { get; set; }
    //public float Succour { get; set; } -- Regeneration
    //public float Luck { get; set; }

    function renderTable() {

        var table = $('#itemTable');

        for (var i = 0; i < items.length; i++) {

            var dat = items[i];
   
            var img = "<td>" + printPortrait(dat) + "</td>";
            var friendlyName = "<td>" + dat.FriendlyName + "</td>";
            var type = "<td>" + dat.ItemType + "</td>";

            var disc = "<td>" + styleMe(dat.Discipline) + "</td>";
            var perc = "<td>" + styleMe(dat.Perception) + "</td>";
            var char = "<td>" + styleMe(dat.Charisma) + "</td>";
            var fort = "<td>" + styleMe(dat.Fortitude) + "</td>";
            var agil = "<td>" + styleMe(dat.Agility) + "</td>";
            var rest = "<td>" + styleMe(dat.Allure) + "</td>";
            var mag = "<td>" + styleMe(dat.Magicka) + "</td>";
            var regen = "<td>" + styleMe(dat.Succour) + "</td>";
            var luck = "<td>" + styleMe(dat.Luck) + "</td>";


            table.append('<tr>' +

                img +
                friendlyName +
                type +

                disc +
                perc +
                char +
                fort +
                agil +
                rest +
                mag +
                regen +
                luck +

                '</tr>');
        }

        $('#itemTable').dataTable({
            "lengthMenu": [[10, 25, 50, 100, 200, -1], [10, 25, 50, 100, 200, "All"]]
        });

    }

    function styleMe(value) {
        if (value == 0) {
            return "<span class='zero'>" + value + "</span>";
        } else if (value > 0) {
            return "<span class='good'>" + value + "</span>";
        } else {
            return "<span class='bad'>" + value + "</span>";
        }
    }



    function printPortrait(dat) {
        if (dat.ItemType == 'pet') {
            return "<img src='/Images/PvP/animalPortraits/Thumbnails/100/" + dat.PortraitUrl + "' width=50; height=50;>";
        } else {
            return "<img src='/Images/PvP/itemsPortraits/Thumbnails/100/" + dat.PortraitUrl + "' width=50; height=50;>";
        }
    }

    loadJson();

</script>

<style>
     th, td {
        border: 1px solid black;
        text-align: center;
    }
</style>